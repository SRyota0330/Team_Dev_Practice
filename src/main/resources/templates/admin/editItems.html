<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>商品編集</title>
  <link rel="stylesheet" href="/css/editItems.css">

</head>

<body>
  <div class="top-buttons">
    <a href="/admin"><button class="button">← 管理ページに戻る</button></a>
    <form action="/logout" method="post" style="margin: 0;">
      <button type="submit" class="button danger">ログアウト</button>
    </form>
  </div>

  <div class="main-wrapper">
    <h2>商品編集</h2>
    <form action="/editItems" method="post" enctype="multipart/form-data">
      <!-- 商品ID（hidden） -->
      <input type="hidden" name="itemid" th:value="${item.itemid}">

      <label for="name">商品名:</label>
      <input type="text" id="name" name="name" th:value="${item.name}">

      <label for="price">商品価格:</label>
      <input type="text" id="price" name="price" th:value="${item.price}">

	  <label for="genre">ジャンル:</label>
	  <select id="genre" name="genre" required>
	    <option value="ワイン">ワイン</option>
	    <option value="ビール">ビール</option>
	    <option value="ウイスキー">ウイスキー</option>
	    <option value="果実酒">果実酒</option>
	    <option value="日本酒">日本酒</option>
	  </select>

      <label for="detail">商品詳細:</label>
      <textarea id="detail" name="detail" th:text="${item.detail}"></textarea>

      <!-- 現在の画像リンク表示 -->
      <label>現在の画像:</label>
      <div>
        <img th:src="${item.picturelink}" alt="現在の画像" style="max-width: 200px; max-height: 200px;">
      </div>

      <!-- 画像ファイルアップロード -->
      <label for="file">新しい商品画像:</label>
      <input type="file" id="file" name="file" accept="image/*" onchange="previewImage(event)">
	  <img id="preview" alt="新しい画像プレビュー" style="max-width: 200px; max-height: 200px; display: none;">
	  
      <label for="count">商品数量:</label>
      <input type="number" id="count" name="count" th:value="${count}">
    
      <button type="submit" class="button">更新</button>
    </form>
  </div>
  <script>
  function previewImage(event) {
      const reader = new FileReader();
      reader.onload = function () {
          const preview = document.getElementById('preview');
          preview.src = reader.result;
          preview.style.display = 'block';
      };
      reader.readAsDataURL(event.target.files[0]);
  }
  </script>

</body>

</html>
